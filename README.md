# Carrefour Cart CSV Exporter & Importer – תוסף לייצוא וייבוא עגלת Carrefour

> **הצהרת אי־תלות:**  
> תוסף **Carrefour Cart CSV Exporter & Importer** הוא פרויקט **אישי** ובלתי תלוי, **אינו קשור** ולא מאושר על־ידי רשת Carrefour.  
> התוסף **ללא מטרת רווח**, ומיועד רק לשיפור וייעול חוויית המשתמש באתר Carrefour.

הרחבה לדפדפן כרום המאפשרת ייצוא וייבוא של עגלת הקניות באתר Carrefour לקובץ CSV.

## תכונות עיקריות

* ייצוא העגלה הנוכחית לקובץ CSV בלחיצה אחת
* ייבוא עגלה מקובץ CSV
* תמיכה במצבי ייבוא שונים: החלפת העגלה הנוכחית או הוספה לעגלה
* זיהוי חכם של שדות CSV
* טיפול במוצרים קיימים ועדכון כמויות

## מבנה קוד מודולרי

הגרסה 2.0 של ההרחבה מאורגנת במבנה מודולרי, המשפר את התחזוקתיות ואת הארגון של הקוד.
המבנה החדש מחולק למודולים לפי תחומי אחריות:

```
src/
├── utils/            # פונקציות עזר ושירותים משותפים
│   ├── config.js     # הגדרות קונפיגורציה וקבועים
│   └── helpers.js    # פונקציות שירות כלליות
├── api/              # ממשקי API
│   └── cartService.js # שירותי API לעגלה
├── data/             # מודולים לטיפול בנתונים
│   └── csvService.js  # עיבוד וטיפול בקבצי CSV
├── ui/               # רכיבי ממשק משתמש
│   └── uiComponents.js # ממשקי UI
├── services/         # שירותי אפליקציה
│   └── cartOperations.js # פעולות עגלה (ייבוא/ייצוא)
└── content.js        # הסקריפט הראשי
```

## התקנה מקודד מקור

כדי להתקין את ההרחבה מקוד המקור, יש לבצע את השלבים הבאים:

1. **התקנת תלויות**
   ```
   npm install
   ```

2. **בניית ההרחבה**
   ```
   npm run build
   ```
   פעולה זו תיצור קבצים מאוחדים בתיקיית `dist/`.

3. **טעינת ההרחבה בכרום**
   - פתח את דף ההרחבות בכרום (`chrome://extensions/`)
   - הפעל מצב מפתח (Developer Mode)
   - לחץ על "טען הרחבה שלא נארזה" (Load unpacked)
   - בחר את תיקיית הפרויקט

## פיתוח

לפיתוח עם בנייה אוטומטית בזמן שינויים:
```
npm run watch
```

## תמיכה והתקנה של משתמשים

ניתן להוריד את ההרחבה מחנות ההרחבות של כרום.

## רישיון

MIT

## שינויים בגרסה 2.0

- מבנה קוד מודולרי
- שיפור משמעותי בטיפול בשגיאות
- תמיכה עקבית בפרומיסים
- הפחתת קוד כפול
- ארגון הגדרות בקובץ קונפיגורציה מרכזי
- שיפור בקבלת פריטים בעגלה לפני ייבוא
- תמיכה משופרת במצבי ייבוא שונים
- חבילת בנייה עם Webpack

---

## תכונות

- ייצוא אוטומטי של עגלת הקניות לקובץ CSV  
- ייבוא של קובץ CSV חזרה לעגלת הקניות  
- אין צורך להזין טוקן אימות באופן ידני – התוסף מחלץ אותו באופן אוטומטי  
- פועל בכל דפי אתר Carrefour (לא רק בדף העגלה)  
- מוסיף כפתור "ייצא CSV" ישירות ל־UI של האתר  
- כולל חלון קופץ (popup) עם לשוניות ייצוא וייבוא  
- תצוגת התקדמות בזמן אמת בעת ייבוא מוצרים  

---

## התקנת התוסף

### בדפדפן Chrome

1. הורד/י את תיקיית הפרויקט ושמור/י אותה במקום כלשהו במחשב שלך.  
2. פתח/י את Chrome והקלד `chrome://extensions` בשורת הכתובת.  
3. הפעל/י את "מצב מפתח" (Developer Mode) בפינה הימנית העליונה.  
4. לחץ/י על "Load unpacked" ובחר/י את תיקיית הפרויקט.  
5. התוסף יותקן ויופיע בשורת הכלים של הדפדפן.  

### בדפדפן Edge

1. הורד/י את תיקיית הפרויקט ושמור/י אותה במחשב.  
2. פתח/י את Edge והקלד `edge://extensions`.  
3. הפעל/י "Developer Mode" מצד שמאל.  
4. לחץ/י על "Load unpacked" ובחר/י את התיקייה.  
5. התוסף יותקן ויופיע בשורת הכלים.  

### בדפדפן Firefox

> *הערה:* כדי לעבוד ב-Firefox דרושות התאמות נוספות בתשתית ה-WebExtension.

---

## שימוש בתוסף

### ייצוא עגלת קניות

1. גלוש/י ל־[Carrefour](https://www.carrefour.co.il).  
2. התחבר/י לחשבון שלך ועבור/י לדף העגלה.  
3. לחץ/י על כפתור "ייצא לקובץ CSV" בפינה העליונה.  
4. לחלופין, לחץ/י על אייקון התוסף, ועבור/י ללשונית "ייצוא" → "ייצא עגלה ל-CSV".  
5. הקובץ יורד אוטומטית בשם `carrefour_products.csv`.  

### ייבוא עגלת קניות

1. גלוש/י ל־[Carrefour](https://www.carrefour.co.il).  
2. התחבר/י לחשבון שלך.  
3. לחץ/י על אייקון התוסף.  
4. עבור/י ללשונית "ייבוא".  
5. גרור/י קובץ CSV לאזור המסומן או לחץ/י לבחירת קובץ.  
6. לאחר טעינה, לחץ/י "ייבא מוצרים לעגלה".  
7. עקוב/י אחר התקדמות הייבוא.  
8. בתום התהליך, אם אתה בדף העגלה – העמוד יתעדכן אוטומטית.  

---

## פורמט קובץ CSV לייבוא

הפורמט חייב לכלול את העמודות הבאות (באותו סדר שייצא):  
- `שם` – שם המוצר  
- `ברקוד` – ברקוד המוצר  
- `כמות` – הכמות הרצויה  
- `מחיר` – מחיר יחידה (לא חובה לייבוא)  
- `סה"כ` – מחיר כולל (לא חובה לייבוא)  
- `קישור` – URL למוצר באתר (לזיהוי)  
- `retailerProductId` – מזהה המוצר (לזיהוי)

> אם יש לך CSV אחר, ודא שיש לפחות: `שם`, `(קישור` או `retailerProductId)` ו־`כמות`.

---

## פתרון בעיות

1. ודא/י שאתה מחובר/ת לחשבון באתר Carrefour.  
2. רענן/י את העמוד ונסה/י שוב.  
3. בדוק/י שיש פריטים בעגלה לפני ייצוא.  
4. בדוק/י שהתוסף מופעל בהגדרות התוספים של הדפדפן.  
5. אם הייבוא נכשל – ודא/י שפורמט ה-CSV תקין.  
6. אם הייבוא חלקי – ייתכן שחלק מהמוצרים לא זמינים או שמזהיהם השתנה.

---

## פרטי מידע שנאספים

- **טוקני אימות זמניים** (כגון `x-auth-token` ו־`auth tokens`)  
- **נתוני עגלת הקניות** (פרטי מוצרים)  
- **קבצי CSV** המיוצאים/מיובאים

> כל המידע נאסף **מקומית בלבד**, נשמר ב־`chrome.storage.local`, **אינו נשלח** לשום שרת חיצוני ו**אינו נשמר בענן**.

---

## מדיניות פרטיות

תוכל לקרוא את מדיניות הפרטיות המלאה כאן:  
'privacy-policy.md`

---

## שדרוגים אחרונים (גרסה 1.1)

- הוספת יכולת ייבוא מוצרים מקובץ CSV לעגלה  
- תמיכה בכל דפי אתר Carrefour  
- ממשק חדש עם לשוניות נפרדות לייצוא וייבוא  
- תצוגת התקדמות בזמן אמת בעת ייבוא  
- שדרוג עיצוב וחוויית משתמש  

---

## רישיון

פרויקט זה הוא **קוד פתוח** וזמין לשימוש חופשי.  
